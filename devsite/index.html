<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genshin Artifact Evaluator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Genshin Artifact Evaluator</h1>
            <p>Evaluate artifacts based on character recommendations</p>
        </header>

        <div class="tabs">
            <button class="tab active" data-tab="browse">Browse by Set</button>
            <button class="tab" data-tab="evaluate">Evaluate Artifact</button>
        </div>

        <div class="main-layout">
            <aside class="sidebar">
                <div class="filter-group">
                    <label class="filter-label">Artifact Set</label>
                    <select id="set-filter">
                        <option value="">Select a set...</option>
                    </select>
                </div>

                <div class="filter-group workflow-evaluate-only" style="display: none;">
                    <label class="filter-label">Slot</label>
                    <select id="slot-filter">
                        <option value="">Select a slot...</option>
                    </select>
                </div>

                <div class="filter-group workflow-evaluate-only" style="display: none;">
                    <label class="filter-label">Main Stat</label>
                    <select id="mainstat-filter">
                        <option value="">Select a main stat...</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Preferred Roles Only</label>
                    <div class="toggle-wrapper">
                        <div class="toggle" id="preferred-toggle"></div>
                        <span class="toggle-text">Show all roles</span>
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Substat Rank Threshold</label>
                    <div class="threshold-buttons">
                        <button class="threshold-btn" data-threshold="1">1</button>
                        <button class="threshold-btn" data-threshold="2">2</button>
                        <button class="threshold-btn active" data-threshold="3">3</button>
                        <button class="threshold-btn" data-threshold="4">4</button>
                        <button class="threshold-btn" data-threshold="99">All</button>
                    </div>
                </div>
            </aside>

            <main class="results">
                <div class="loading" id="loading" style="display:none;">Loading dataâ€¦</div>
                <div class="empty-state" id="fatal-error" style="display:none;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <p id="fatal-error-text">Failed to load artifact data.</p>
                    <p style="margin-top:0.5rem; font-size:0.85rem; color: var(--text-secondary);">
                        If you opened this file directly (file://), run a local web server instead (e.g., <code>python -m http.server</code>).
                    </p>
                </div>

                <!-- Browse Workflow -->
                <div class="workflow active" id="workflow-browse">
                    <div class="empty-state" id="browse-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v16.5c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9zm3.75 11.625a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                        </svg>
                        <p>Select an artifact set to see which characters want it</p>
                    </div>
                    <div id="browse-content" style="display: none;">
                        <div class="results-header">
                            <h2 class="results-title" id="browse-title">-</h2>
                            <span class="results-count" id="browse-count">-</span>
                        </div>

                        <h3 class="section-title">Characters</h3>
                        <div class="table-container">
                            <table id="browse-chars-table">
                                <thead>
                                    <tr>
                                        <th>Character</th>
                                        <th>Role</th>
                                        <th>Set Rank</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <hr class="section-divider">

                        <h3 class="section-title">Slot Breakdown</h3>
                        <div class="slot-breakdown" id="slot-breakdown"></div>
                    </div>
                </div>

                <!-- Evaluate Workflow -->
                <div class="workflow" id="workflow-evaluate">
                    <div class="empty-state" id="evaluate-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" />
                        </svg>
                        <p>Select Set, Slot, and Main Stat to evaluate an artifact</p>
                    </div>
                    <div id="evaluate-content" style="display: none;">
                        <div class="verdict" id="verdict">
                            <span class="verdict-count" id="verdict-count">0</span>
                            <span class="verdict-text">
                                <strong id="verdict-text">characters</strong> want this artifact
                            </span>
                        </div>

                        <h3 class="section-title">Characters</h3>
                        <div class="table-container">
                            <table id="evaluate-chars-table">
                                <thead>
                                    <tr>
                                        <th>Character</th>
                                        <th>Role</th>
                                        <th>Set Rank</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <hr class="section-divider">

                        <h3 class="section-title">Substats to Look For</h3>
                        <div class="table-container">
                            <table id="substats-table">
                                <thead>
                                    <tr>
                                        <th>Substat</th>
                                        <th>Rank</th>
                                        <th>Characters</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script defer src="scripts/templates.js"></script>
    <script defer src="scripts/app.js"></script>
</body>
</html>
